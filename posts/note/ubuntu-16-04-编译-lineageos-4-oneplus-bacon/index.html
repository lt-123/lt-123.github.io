<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Ubuntu-16-04-编译-LineageOS-4-OnePlus-bacon - liut</title><link rel=icon type=image/png href=icons/myicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Ubuntu-16-04-编译-LineageOS-4-OnePlus-bacon"><meta property="og:description" content="欲知详情，请点击标题"><meta property="og:type" content="article"><meta property="og:url" content="https://www.liut.xyz/posts/note/ubuntu-16-04-%E7%BC%96%E8%AF%91-lineageos-4-oneplus-bacon/"><meta property="article:published_time" content="2017-09-23T15:15:15+08:00"><meta property="article:modified_time" content="2017-09-23T15:15:15+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ubuntu-16-04-编译-LineageOS-4-OnePlus-bacon"><meta name=twitter:description content="欲知详情，请点击标题"><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://www.liut.xyz/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.liut.xyz/css/main.css><link rel=stylesheet type=text/css href=https://www.liut.xyz/css/dark.css media="(prefers-color-scheme: dark)"><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src=https://www.liut.xyz/js/main.js></script></head><body><div class="container wrapper post"><div class=header><base href=https://www.liut.xyz/><h1 class=site-title><a href=https://www.liut.xyz/>liut</a></h1><div class=site-description><h2>liut.xyz</h2><nav class="nav social"><ul class=flat><a href=https://github.com/lt-123/ title=Github><i data-feather=github></i></a><a href=/index.xml title=RSS><i data-feather=rss></i></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li></ul></nav></div><div class=post-header><h1 class=title>Ubuntu-16-04-编译-LineageOS-4-OnePlus-bacon</h1><div class=meta>Posted at &mdash; Sep 23, 2017</div></div><div class=markdown><h1 id=lineageos-编译>lineageOS 编译</h1><h3 id=准备>准备</h3><ul><li>一台64位Ubuntu16.04PC，可以是远程服务器或虚拟机
至少8个g的内存，100g以上的空闲硬盘空间（不支持NTFS）</li><li>一个好的网络</li><li>一台 OnePlus bacon</li></ul><h3 id=所需环境>所需环境</h3><ul><li><p>ubuntu 16.04
<code>bc bison build-essential curl flex g++-multilib gcc-multilib git gnupg gperf imagemagick lib32ncurses5-dev lib32readline-dev lib32z1-dev libesd0-dev liblz4-tool libncurses5-dev libsdl1.2-dev libssl-dev libwxgtk3.0-dev libxml2 libxml2-utils lzop pngcrush rsync schedtool squashfs-tools xsltproc zip zlib1g-dev</code></p></li><li><p>Ubuntu 16.04 之前版本
<code>libwxgtk3.0-dev</code> → <code>libwxgtk2.8-dev</code></p></li><li><p>JDK
<code>LineageOS 14.1</code>: OpenJDK 1.8 (install <code>openjdk-8-jdk</code>)
<code>LineageOS 11.0-13.0</code>: OpenJDK 1.7 (install <code>openjdk-7-jdk</code>)</p></li></ul><h3 id=安装-repo>安装 repo</h3><p>下载 <code>repo</code> 并添加到环境变量</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mkdir -p ~/bin
$ curl https://storage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo
$ chmod a+x ~/bin/repo
$ <span style=color:#268bd2>PATH</span><span style=color:#719e07>=</span>~/bin:<span style=color:#268bd2>$PATH</span>	//仅对当前终端有效
</code></pre></div><p>这种配置方法仅对当前终端有效，若要永久添加到 <code>PATH</code> 环境变量，可写到 <code>~/.profile</code> 文件中。或者更干脆一点：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo cp ~/bin/repo /usr/bin
</code></pre></div><p>然后就可以删除 <code>~/bin</code> 了</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>rm -r ~/bin
</code></pre></div><blockquote><p>注：如网络不通请自搬梯子或用<a href=https://mirrors.tuna.tsinghua.edu.cn/help/git-repo/>清华的<code>repo</code>源</a></p></blockquote><h3 id=初始化lineageos源代码库>初始化LineageOS源代码库</h3><ul><li><p>建立工作目录</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>mkdir WORKING_DIRECTORY
<span style=color:#b58900>cd</span> WORKING_DIRECTORY
</code></pre></div><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>



</code></pre></div></li></ul><hr><p>export ANDROID_HOST_OUT=out/host/
source build/envsetup.sh // 将执行文件设置为临时变量
make idegen && development/tools/idegen/idegen.sh //生成idegen.jar并生成ide导入所需的.ipr/.iml文件</p><p>source build/envsetup.sh
breakfast bacon
croot
brunch bacon</p></div><div class=post-tags><nav class="nav tags"><ul class=flat><li><a href=/tags/from-jianshu>from jianshu</a></li></ul></nav></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='liut-2017';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by
Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="footer wrapper"><nav class=nav><div>© Copyright notice | <a href=https://github.com/vividvilla/ezhil>Ezhil theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></nav></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146893441-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script>feather.replace()</script></body></html>